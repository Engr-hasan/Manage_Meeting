@extends('layouts.admin')<?php$accessMode = ACL::getAccsessRight('QuestionBank');if (!ACL::isAllowed($accessMode, 'V'))    die('no access right!');?><style>    label.error {        display: none !important;    }</style>@section('content')    <div class="col-lg-12">        {!! Session::has('success') ? '<div class="alert alert-success alert-dismissible"><button aria-hidden="true" data-dismiss="alert" class="close" type="button">×</button>'. Session::get("success") .'</div>' : '' !!}        {!! Session::has('error') ? '<div class="alert alert-danger alert-dismissible"><button aria-hidden="true" data-dismiss="alert" class="close" type="button">×</button>'. Session::get("error") .'</div>' : '' !!}        <div class="panel panel-primary">            <div class="panel-heading" style="padding: 3px 15px !important;">                <div class="pull-left">                    <h6>                    <span style=" font-size: 18px;">                        @if($viewStatus != 'on')                            {{ trans('messages.edit_question') }}                        @else                            {{ trans('messages.view_question') }}                        @endif                    </span>                    </h6>                </div>                <a href="{{ url ('/exam/question-bank/list') }}"><button class="btn btn-info" style="float: right;"><i class="fa fa-list"></i> {{ trans('messages.question_list') }}<i class="icon-plus icon-white"></i></button></a>                <div class="clearfix"></div>            </div>            <!-- /.panel-heading -->            <div class="panel-body">                {!! Form::open(['url' => '/exam/question-bank/update/'.Encryption::encodeId($question->id), 'id'=>'question-form',  'class' => 'form-horizontal', 'role' => 'form']) !!}                <fieldset>                    <div class="form-group {{ $errors->has('question_type')?'has-error':'' }}">                        {!! Form::label('question_type','Question Type',['class'=>'font-norm col-md-2 required-star text-right']) !!}                        <div class="col-md-6">                            {!! Form::select('question_type',$examType,$question->question_type,['class'=>'form-control','placeholder'=>'Select one','required']) !!}                            {!! $errors->first('question_type','<span class="text-danger">:message</span>') !!}                        </div>                    </div>                    <div class="form-group {{ $errors->has('question_name')?'has-error':'' }}">                        {!! Form::label('question_name','Question:',['class'=>'font-norm required-star col-md-2 text-right']) !!}                        <div class="col-md-6">                            {!! Form::text('question_name',$question->question_name,['class'=>'form-control exam','placeholder'=>'Write your question','required']) !!}                            {!! $errors->first('question_name','<span class="text-danger">:message</span>') !!}                        </div>                    </div>                    @if($viewStatus != 'on')                        <div class="form-group">                            {!! Form::label('additional_part','Additional part:',['class'=>'font-norm control-label col-md-2 text-right']) !!}                            <div class="col-md-8 {{$errors->has('remarks') ? 'has-error' : ''}}">                                {!! Form::textarea('additional_part',$question->additional_part,['class'=>'additional_part form-control remarks','id'=>'remarks', 'placeholder'=>'Enter additional text',                                'maxlength' => 1000, 'size' => "10x8"]) !!}                                <small class="text-muted"><b>(Maximum length 1000)</b></small><br/>                                {!! $errors->first('additional_part','<span class="help-block">:message</span>') !!}                            </div>                        </div>                    @else                        @if($question->additional_part != '')                        <div class="form-group">                            {!! Form::label('additional_part','Additional part:',['class'=>'font-norm control-label col-md-2 text-right']) !!}                            <div class="col-md-8">                                <div class="well">                                    {!! $question->additional_part !!}                                </div>                            </div>                        </div>                        @endif                    @endif                    <div class="input_fields_container">                        @foreach($options as $option)                            <div class="form-group" id="answer_field">                                {!! Form::label('answer_option','Option :',['class'=>'font-norm control-label required-star col-md-2 text-right']) !!}                                <div class="col-md-6">                                    <div class="input-group">                                        <input required="" name="answer_option[{{$option->option_no}}]" value="{{$option->option_name}}" type="text" class="form-control exam">                                        <span class="input-group-addon">                                            <input type="checkbox" name="correct_answer[{{$option->option_no}}]" value="{{$option->option_no}}" @if($option->is_correct_answer == 1) checked @else @endif>                                        </span>                                    </div>                                </div>                                @if($option->option_no == 1)                                    <a class="btn btn-info add_more_button btn-xs"><i class="fa fa-plus-square" aria-hidden="true"></i> Add more</a>                                @else                                    <a href="#" class="remove_field btn btn-danger btn-xs"><i class="fa fa-times"></i> Remove</a>                                @endif                            </div>                        @endforeach                    </div>                    @if($viewStatus != 'on')                    <div class="col-md-12">                        <a href="{{ url('/exam/question-bank/list') }}">                            {!! Form::button('<i class="fa fa-times"></i> Close', array('type' => 'button', 'class' => 'btn btn-default')) !!}                        </a>                        <button type="submit" class="btn btn-primary pull-right next">                            <i class="fa fa-chevron-circle-right"></i> Update</button>                    </div>                    @endif                </fieldset>                {!! Form::close() !!}            </div><!-- /.box-body -->        </div>    </div>    @endsection    @section('footer-script')    <!-- /.question -->    <script src="//cdn.tinymce.com/4/tinymce.min.js"></script>    <script type="text/javascript">        tinymce.init({            selector: '.additional_part',            height: 50,            theme: 'modern',            plugins: [                'autosave advlist autolink lists link image charmap print preview hr anchor pagebreak',                'searchreplace wordcount visualblocks visualchars code fullscreen',                'insertdatetime media nonbreaking save table contextmenu directionality',                'emoticons template paste textcolor colorpicker textpattern imagetools'            ],            toolbar1: 'insertfile undo redo | styleselect | bold italic | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | link image',            toolbar2: 'print preview media | forecolor backcolor emoticons',            image_advtab: true,            content_css: [                '//www.tinymce.com/css/codepen.min.css'            ]        });        $(document).ready(function(){            @if($viewStatus == 'on')               $('#question-form :input').attr('disabled', true);            $('#question-form :button').hide();            $('.input_fields_container a').attr('disabled', 'true');            $('.input_fields_container a').hide();            @endif            $("#question_number").keyup(function(){                        var i=1;                        var k=1;                        $('.option_body').empty();                        var section = $(this).val();                        for (i = 1; i <= section; i++) {                            $('.option_body').append("<div class='form-group'><label class='control-label col-md-2'>" +                                    "Answer :"+k+" </label><div class='col-md-6'><div class='input-group'><input required name='answer_option["+i+"]' type='text'class='form-control exam'/><span class='input-group-addon'><input type='checkbox' name='correct_answer["+ i +"]' value='"+i+"'></span></div></div></div>");                            k++;                        }                    });            $("#question_number").change(function(){                var i=1;                var k=1;                $('.option_body').empty();                var section = $(this).val();                for (i = 1; i <= section; i++) {                    $('.option_body').append("<div class='form-group'><label class='control-label col-md-2'>" +                            "Answer :"+k+" </label><div class='col-md-6'><div class='input-group'><input required name='answer_option["+i+"]' type='text'class='form-control exam'/><span class='input-group-addon'><input type='checkbox' name='correct_answer["+ i +"]' value='"+i+"'></span></div></div></div>");                    k++;                }            });            $('.add_more_button').click(function(e){ //click event on add more fields button having class add_more_button                e.preventDefault();                var lastTr,leftReplace,rightReplace;                lastTr = $('.input_fields_container').find('.exam').last().attr('name');                leftReplace = lastTr.replace("answer_option[", "");                rightReplace = leftReplace.replace("]",'');                console.log(rightReplace);                var x = rightReplace; //$('.input_fields_container').find('.exam').length; //initialize counter for text box                x++; //counter increment                $('.input_fields_container').append("<div class='form-group'><label class='control-label col-md-2 required-star'>" +                        "Option : </label><div class='col-md-6'><div class='input-group'><input name='answer_option["+x+"]' type='text'class='form-control required exam'/><span class='input-group-addon'><input type='checkbox' name='correct_answer["+ x +"]' value='"+x+"'></span></div></div><a href='#' class='remove_field btn btn-danger btn-xs' ><i class='fa fa-times'></i> Remove</a></div>"); //add input field            });            $('.input_fields_container').on("click",".remove_field", function(e){ //user click on remove text links                e.preventDefault(); $(this).parent('div').remove();            })            $.validator.addMethod("checkbox", function(value, elem, param) {                if($('.input_fields_container').find('input[type=checkbox]:checked').length == 0) {                    return false;                }else {                    return true;                }            },"You must select at least one!");            $("#question-form").validate({                rules: {                    question_type: "required",                    question_namee: "required",                    question_number: "required",                    answer_option: "required",                    "correct_answer[]": {                        required: true,                        checkbox: true                    },                },                messages: {                }            });        });    </script>    @endsection <!--- footer script--->