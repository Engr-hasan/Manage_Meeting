DROP TABLE IF EXISTS `dashboard_object`;

CREATE TABLE `dashboard_object` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `db_obj_title` varchar(100) COLLATE utf8_unicode_ci NOT NULL,
  `db_obj_caption` varchar(100) COLLATE utf8_unicode_ci DEFAULT NULL,
  `db_user_id` int(11) DEFAULT NULL,
  `db_obj_type` varchar(50) COLLATE utf8_unicode_ci DEFAULT NULL,
  `db_obj_para1` varchar(5000) COLLATE utf8_unicode_ci DEFAULT NULL,
  `db_obj_para2` varchar(5000) COLLATE utf8_unicode_ci DEFAULT NULL,
  `db_obj_status` int(11) DEFAULT NULL,
  `db_obj_sort` int(11) DEFAULT NULL,
  `db_user_type` varchar(30) COLLATE utf8_unicode_ci DEFAULT NULL,
  `created_at` timestamp NOT NULL DEFAULT '0000-00-00 00:00:00',
  `updated_at` timestamp NOT NULL DEFAULT '0000-00-00 00:00:00',
  `is_locked` int(11) NOT NULL,
  `updated_by` int(11) NOT NULL,
  PRIMARY KEY (`id`),
  KEY `db_usere_id` (`db_user_id`),
  KEY `db_obj_status` (`db_obj_status`),
  KEY `is_locked` (`is_locked`),
  KEY `db_obj_type` (`db_obj_type`)
) ENGINE=InnoDB AUTO_INCREMENT=36 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;

/*Data for the table `dashboard_object` */

insert  into `dashboard_object`(`id`,`db_obj_title`,`db_obj_caption`,`db_user_id`,`db_obj_type`,`db_obj_para1`,`db_obj_para2`,`db_obj_status`,`db_obj_sort`,`db_user_type`,`created_at`,`updated_at`,`is_locked`,`updated_by`) values (4,'last 10 paid pilgrims (Government)','last 10 paid pilgrims',0,'LIST','select full_name_bangla as name, tracking_no, serial_no\r\nfrom pilgrims where payment_status=12\r\nand is_govt=\'Government\'\r\norder by serial_no desc\r\nlimit 10',NULL,NULL,NULL,'z,1x101,3x305,3x304','0000-00-00 00:00:00','0000-00-00 00:00:00',0,0),(5,'last 10 paid pilgrims (Private)','last 10 paid pilgrims',0,'LIST','select full_name_bangla as name, tracking_no, serial_no\r\nfrom pilgrims where payment_status=12\r\nand is_govt=\'Private\'\r\norder by serial_no desc\r\nlimit 10',NULL,NULL,NULL,'z,1x101,3x305','0000-00-00 00:00:00','0000-00-00 00:00:00',0,0),(6,'Details','D1-305042',0,'DETAILS','select \'Government\' Management, \'Last hour\' Period,\r\n count(distinct pilgrim_id) Pilgrims from pilgrim_priority_govt where created_at>date_add(now(),interval -1 hour) union all select \'Government\' Management, \'Today\' Period,count(distinct pilgrim_id) Pilgrims from pilgrim_priority_govt where created_at>date(now()) union all select \'Government\' Management, \'Total\' Period,count(distinct pilgrim_id) Pilgrims from pilgrim_priority_govt union all select \'Private\' Management, \'Last hour\' Period,count(distinct pilgrim_id) Pilgrims from pilgrim_priority_private where created_at>date_add(now(),interval -1 hour) union all select \'Private\' Management, \'Today\' Period,count(distinct pilgrim_id) Pilgrims from pilgrim_priority_private where created_at>date(now()) union all select \'Private\' Management, \'Total\' Period,count(distinct pilgrim_id) Pilgrims from pilgrim_priority_private',NULL,NULL,NULL,NULL,'0000-00-00 00:00:00','0000-00-00 00:00:00',0,0),(7,'Details','D2-972220',0,'DETAILS','select \'Government\' Management, \'Last hour\' Period,\r\n count(distinct pilgrim_id) Pilgrims from pilgrim_priority_govt where created_at>date_add(now(),interval -1 hour) union all select \'Government\' Management, \'Today\' Period,count(distinct pilgrim_id) Pilgrims from pilgrim_priority_govt where created_at>date(now()) union all select \'Government\' Management, \'Total\' Period,count(distinct pilgrim_id) Pilgrims from pilgrim_priority_govt union all select \'Private\' Management, \'Last hour\' Period,count(distinct pilgrim_id) Pilgrims from pilgrim_priority_private where created_at>date_add(now(),interval -1 hour) union all select \'Private\' Management, \'Today\' Period,count(distinct pilgrim_id) Pilgrims from pilgrim_priority_private where created_at>date(now()) union all select \'Private\' Management, \'Total\' Period,count(distinct pilgrim_id) Pilgrims from pilgrim_priority_private',NULL,NULL,NULL,NULL,'0000-00-00 00:00:00','0000-00-00 00:00:00',0,0),(11,'Configuration for Private agency','Configuration for Private agency',0,'LIST','select \'Pilgrim pre-registration\' as caption, if (value=1, \'ON\',\'OFF\') settings\r\nfrom configuration where caption=\'PRIVATE_DATA_ENTRY_MODE\'\r\nunion all\r\nselect \'Pre-registration period\' as caption, concat(value,\' to \',value2) settings\r\nfrom configuration where caption=\'PRE_REG_PRIVATE_PERIOD\'\r\nunion all \r\nselect \'Maximum entry limit for agency\' as caption, value settings\r\nfrom configuration where caption=\'PER_PRIVATE_AGENCY_MAX_ENTRY\'\r\nunion all \r\nselect \'Maximum entry limit for user per-day\' as caption, value settings\r\nfrom configuration where caption=\'PER_USER_PER_DAY_MAX_ENTRY\'',NULL,NULL,NULL,'z,12x431,12x432','0000-00-00 00:00:00','0000-00-00 00:00:00',0,0),(12,'Configuration for Government Pre-registration','Configuration for Government Pre-registration',0,'LIST','SELECT \'Pilgrim pre-registration\' as caption, if (value=1, \'ON\',\'OFF\') settings\r\nfrom configuration where caption=\'GOVT_DATA_ENTRY_MODE\'\r\nunion all\r\nselect \'Pre-registration period\' as caption, concat(value,\' to \',value2) settings\r\nfrom configuration where caption=\'PRE_REG_GOVT_PERIOD\'\r\nunion all \r\nselect \'Total Quota for Government\' as caption, FORMAT(value3,0) settings\r\nfrom configuration where caption=\'PRE_REG_GOVT_PERIOD\'\r\nunion all \r\nselect \'Maximum entry limit for user per-day\' as caption, value settings\r\nfrom configuration where caption=\'PER_USER_PER_DAY_MAX_ENTRY\'',NULL,NULL,NULL,'z,10x412,10x411,10x413,10x414','0000-00-00 00:00:00','2016-10-09 10:54:05',0,989),(27,'Details','D2-972320',0,'DETAILS','SELECT NAME AS Bank, is_govt AS Management,\r\nCOUNT(DISTINCT ref_no) AS NoOfTrans,\r\nCOUNT(DISTINCT pilgrim_id) AS NoOfPilgrim\r\nFROM payment LEFT JOIN bank ON payment.bank_id=bank.id LEFT JOIN pilgrims ON pilgrims .id=payment .pilgrim_id\r\nWHERE payment.payment_status=11\r\nGROUP BY Bank, bank_id, is_govt',NULL,NULL,NULL,NULL,'0000-00-00 00:00:00','0000-00-00 00:00:00',0,0),(31,'widgets','Private',0,'widget','SELECT \'Draft/In-process\' caption, FORMAT(COUNT(id),0) `value` \r\n, \'success\' AS theme, \'fa fa-file-text-o\' AS icon, \'view-details/D2-972220\' AS url \r\nFROM pilgrims WHERE serial_no=0 AND `user_type`=\'{$sess_user_type}\' AND `user_sub_type`=\'{$sess_user_sub_type}\'\r\nUNION ALL\r\nSELECT \'Your Registerd Pilgrim\' caption, FORMAT(COUNT(id),0) `value` \r\n, \'green\' AS theme, \'fa fa-file-text-o\' AS icon, \'view-details/D2-972220\' AS url \r\nFROM pilgrims WHERE serial_no>0 AND `user_type`=\'{$sess_user_type}\' AND `user_sub_type`=\'{$sess_user_sub_type}\'\r\nUNION ALL\r\nSELECT \'Payment In-process by Bank\' caption, FORMAT(COUNT(id),0) `value`\r\n, \'yellow\' AS theme, \'fa fa-file-text-o\' AS icon, \'view-details/D2-972320\' AS url \r\nFROM pilgrims WHERE serial_no<1 AND payment_status=11\r\nUNION ALL\r\nSELECT \'Non-Govt. Registerd\' caption,  FORMAT(COUNT(distinct pilgrim_id),0) `value` \r\n, \'primary\' AS theme, \'fa fa-file-text-o\' AS icon, \'view-details/D2-972220\' AS url \r\nFROM `pilgrim_priority_private`',NULL,NULL,NULL,'z,12x432,12x431','0000-00-00 00:00:00','0000-00-00 00:00:00',0,0),(32,'widgets','Govornment',0,'widget','SELECT \'Draft/In-process\' caption, FORMAT(COUNT(id),0) `value`\r\n, \'yellow\' AS theme, \'fa fa-file-text-o\' AS icon, \'view-details/D2-972220\' AS url \r\nFROM pilgrims WHERE serial_no<1 AND is_archived=0  AND `user_type`=\'{$sess_user_type}\' AND `user_sub_type`=\'{$sess_user_sub_type}\'\r\nUNION ALL\r\nSELECT \'Your Registerd Pilgrim\' caption, FORMAT(COUNT(id),0) `value` \r\n, \'success\' AS theme, \'fa fa-file-text-o\' AS icon, \'view-details/D2-972220\' AS url \r\nFROM pilgrims WHERE serial_no>0 AND `user_type`=\'{$sess_user_type}\' AND `user_sub_type`=\'{$sess_user_sub_type}\'\r\nUNION ALL\r\nSELECT \'Govornment Registerd\' caption,  FORMAT(COUNT(distinct pilgrim_id),0) `value` \r\n, \'primary\' AS theme, \'fa fa-file-text-o\' AS icon, \'view-details/D2-972220\' AS url \r\nFROM `pilgrim_priority_private`\r\nUNION ALL\r\nSELECT \'Govornment Quota\' caption, FORMAT(IFNULL(`value3`,0),0) `value` \r\n, \'primary\' AS theme, \'fa fa-file-text-o\' AS icon, \'view-details/D2-972220\' AS url \r\nFROM `configuration` WHERE `caption`=\'PRE_REG_GOVT_PERIOD\'',NULL,NULL,NULL,'z,10x412,10x411,10x413,10x414','0000-00-00 00:00:00','0000-00-00 00:00:00',0,0),(33,'widgets','Common',0,'widget','SELECT \'Non-Govt. Registerd\' caption,  FORMAT(COUNT(distinct pilgrim_id),0) `value` , \'primary\' AS theme, \'fa fa-file-text-o\' AS icon, \'view-details/D2-972220\' AS url FROM `pilgrim_priority_private`\r\nUNION ALL\r\nSELECT \'Non-Govt In-process by Bank\' caption, FORMAT(COUNT(id),0) `value`, \'yellow\' AS theme, \'fa fa-file-text-o\' AS icon, \'view-details/D2-972320\' AS url FROM pilgrims WHERE serial_no<1 AND payment_status=11 and is_govt=\'Private\'\r\nUNION ALL \r\nSELECT \'Govornment Registerd\' caption,  FORMAT(COUNT(distinct pilgrim_id),0) `value` , \'primary\' AS theme, \'fa fa-file-text-o\' AS icon, \'view-details/D2-972220\' AS url FROM `pilgrim_priority_govt` \r\nUNION ALL\r\nSELECT \'Govt In-process by Bank\' caption, FORMAT(COUNT(id),0) `value`, \'yellow\' AS theme, \'fa fa-file-text-o\' AS icon, \'view-details/D2-972320\' AS url FROM pilgrims WHERE serial_no<1 AND payment_status=11  and is_govt!=\'Private\'\r\n',NULL,NULL,NULL,'0','0000-00-00 00:00:00','0000-00-00 00:00:00',0,0),(34,'Details','D1-305021',0,'DETAILS','SELECT \'Government\' Management, \'Last hour\' Period, COUNT( id) Pilgrims FROM pilgrims WHERE is_govt=\'Government\' AND reg_payment_status=12 AND reg_created_at>DATE_ADD(NOW(),INTERVAL -1 HOUR) \r\nUNION ALL \r\nSELECT \'Government\' Management, \'Today\' Period, COUNT( id) Pilgrims FROM pilgrims WHERE is_govt=\'Government\'  AND reg_payment_status=12 AND reg_created_at>DATE(NOW())\r\nUNION ALL \r\nSELECT \'Government\' Management, \'Total\' Period,COUNT( id) Pilgrims FROM pilgrims WHERE is_govt=\'Government\' AND reg_payment_status=12\r\n',NULL,NULL,NULL,NULL,'0000-00-00 00:00:00','0000-00-00 00:00:00',0,0),(35,'Details','D2-972227',0,'DETAILS','SELECT \'Private\' Management, \'Last hour\' Period,COUNT( id) Pilgrims FROM pilgrims WHERE is_govt=\'Private\' AND reg_payment_status=12 AND reg_created_at>DATE_ADD(NOW(),INTERVAL -1 HOUR) \r\nUNION ALL \r\nSELECT \'Private\' Management, \'Today\' Period,COUNT( id) Pilgrims FROM pilgrims WHERE is_govt=\'Private\' AND reg_payment_status=12 AND reg_created_at>DATE(NOW()) \r\nUNION ALL \r\nSELECT \'Private\' Management, \'Total\' Period,COUNT( id) Pilgrims FROM pilgrims WHERE is_govt=\'Private\' AND reg_payment_status=12\r\n  ',NULL,NULL,NULL,NULL,'0000-00-00 00:00:00','0000-00-00 00:00:00',0,0);